##ReadmeFile###
**P2P Schedules API Facade**

Facade which aggregates the P2P Schedules APIs of the following Carriers:

ANNU, ANRM, APLU, CHNL, CMDU, COSU, HDMU, MAEI, MAEU, MSCU, ONEY, OOLU,ZIMU

Other Carriers currently do not offer such an API.

The Facade provides a consistent interface for requests and responses. A Swagger doc decribing this interface is
provided, on localhost see: localhost:8000/docs#/API Point To Point Schedules/get_schedules_schedules_p2p_get

Tested under Python 3.12.3 (see Dockerfile).

For a list of dependencies refer to requirements.txt.

Results are cached in a remote MongoDB based on carrierp2p setting

**TODO:** Currently the .env file contains several secrets, these should be removed from there. Locally the need to be
stored in a gitignored file, in OCP they can be provided via Secret.

**TODO:** If we use redis_mgr.py,please setup redis, put the credential into env file ,uncomment the redis credential in
config.py and change cacheDB to RedisDB in configmap.yaml

# Project Structure
      p2papi/
      ├── app/
      │   ├── api/
      │   │   ├── handler/                     # Handles all business-related logic
      │   │   │   ├── p2p_schedule/            # P2P schedule management
      │   │   │   │   ├── carrier_api/         # Handles all carrier-related mapping logic
      │   │   │   │   │   ├── __init__.py
      │   │   │   │   │   ├── cma.py
      │   │   │   │   │   ├── hamburgsud.py
      │   │   │   │   │   ├── helpers.py
      │   │   │   │   │   ├── hlag.py
      │   │   │   │   │   ├── hmm.py
      │   │   │   │   │   ├── iqax.py
      │   │   │   │   │   ├── maersk.py
      │   │   │   │   │   ├── msc.py
      │   │   │   │   │   ├── one.py
      │   │   │   │   │   ├── zim.py
      │   │   │   │   ├── schedules_router.py  # P2P schedule router
      │   │   │   │   ├── __init__.py
      │   │   ├── schemas/                     # API schema definitions
      │   │   │   ├── __init__.py
      │   │   │   ├── schema_request.py
      │   │   │   ├── schema_response.py
      │   │   ├── routers/
      │   │   │   ├── __init__.py
      │   │   │   ├── port_map.py
      │   │   │   ├── schedules_router.py
      │   ├── internal/                        # Internal logic not accessible by other packages
      │   │   ├── http/                        # HTTP client logic
      │   │   │   ├── __init__.py
      │   │   │   ├── http_client_manager.py   # Handles HTTP client pool, lifecycle, and original response caching
      │   │   │   ├── middleware.py            # Middleware for each HTTP client
      │   │   ├── logging.py                   # Logging 
      │   │   ├── security.py                  # Security configurations
      │   │   ├── setting.py                   # Configuration settings
      │   │   ├── storage/                     # Database management
      │   │   │   ├── __init__.py
      │   │   │   ├── redis_mgr.py             # Redis manager for storage
      │   ├── .env                             # Environment variables file
      │   ├── .env.example                     
      │   ├── __init__.py
      │   ├── configmap.yaml                   # Configuration map
      │   ├── main.py                          # Main application entry point
      ├── cicd/                                # Continuous Integration/Continuous Deployment scripts and configurations
      ├── tests/                               # Unit and integration tests
      ├── .flake8                              # Linting configuration
      ├── .gitignore                           # Git ignored files configuration
      ├── .gitlab-ci.yml                       # GitLab CI/CD pipeline configuration
      ├── cicd-workflow.png                    # CI/CD workflow diagram
      ├── Dockerfile                           # Docker configuration for containerization
      ├── poetry.lock                          # Poetry dependency lock file
      ├── pyproject.toml                       # Poetry project configuration
      ├── README.md                            # Project documentation
      ├── requirements.txt                     # Python dependencies file


# CICD Workflow

This section describes the CICD workflow.

![alt text](cicd-workflow.png)

## Stages and jobs

1. **Code Analysis**: In this stage, we will check code with lint, sonar, etc
2. **Build**: The build stage will be responsible for packaging the applications or creating a docker image to be pushed
   to the images repository. In this stage, a should be created a cache to change files generated by the build.
3. **Tests**: Tests are important in every project. This stage should aggregate the Unit test and the Integrations test.
5. **Publish**: A release candidate is created to be deployed in DEV and UAT environments.
6. **Deploy DEV**: Deploy the release candidate in the DEV environment
7. **Deploy UAT**: Deploy the release candidate in the UAT environment
8. **Publish**: Promote the release candidate to a final release
9. **Deploy PROD**: Deploy the release in a Production environment.

# Environments:

## [DEV]

## [UAT]

## [PROD]()

# Aux ECS

## Force Redeploy

´´´
...
--force-new-deployment
´´´

demo01
